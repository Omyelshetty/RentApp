{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\omyel\\\\Desktop\\\\RentApp\\\\client\\\\src\\\\auth\\\\ProtectedRoute.jsx\";\n// src/auth/ProtectedRoute.jsx\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport jwt_decode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  role\n}) => {\n  const token = localStorage.getItem('token');\n  if (!token) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 24\n  }, this);\n  try {\n    const decoded = jwt_decode(token);\n\n    // Check token expiry\n    const isExpired = decoded.exp * 1000 < Date.now();\n    if (isExpired) {\n      localStorage.clear();\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 20\n      }, this);\n    }\n\n    // Check role (optional)\n    if (role && decoded.role !== role) return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 51\n    }, this);\n    return children;\n  } catch (err) {\n    // Invalid token\n    localStorage.clear();\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 16\n    }, this);\n  }\n};\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","jwt_decode","jsxDEV","_jsxDEV","ProtectedRoute","children","role","token","localStorage","getItem","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","decoded","isExpired","exp","Date","now","clear","err","_c","$RefreshReg$"],"sources":["C:/Users/omyel/Desktop/RentApp/client/src/auth/ProtectedRoute.jsx"],"sourcesContent":["// src/auth/ProtectedRoute.jsx\r\nimport React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nconst ProtectedRoute = ({ children, role }) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return <Navigate to=\"/\" replace />;\r\n\r\n    try {\r\n        const decoded = jwt_decode(token);\r\n\r\n        // Check token expiry\r\n        const isExpired = decoded.exp * 1000 < Date.now();\r\n        if (isExpired) {\r\n            localStorage.clear();\r\n            return <Navigate to=\"/\" replace />;\r\n        }\r\n\r\n        // Check role (optional)\r\n        if (role && decoded.role !== role) return <Navigate to=\"/\" replace />;\r\n\r\n        return children;\r\n    } catch (err) {\r\n        // Invalid token\r\n        localStorage.clear();\r\n        return <Navigate to=\"/\" replace />;\r\n    }\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,UAAU,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAK,CAAC,KAAK;EAC3C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE,oBAAOJ,OAAA,CAACH,QAAQ;IAACU,EAAE,EAAC,GAAG;IAACC,OAAO;EAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAE9C,IAAI;IACA,MAAMC,OAAO,GAAGf,UAAU,CAACM,KAAK,CAAC;;IAEjC;IACA,MAAMU,SAAS,GAAGD,OAAO,CAACE,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IACjD,IAAIH,SAAS,EAAE;MACXT,YAAY,CAACa,KAAK,CAAC,CAAC;MACpB,oBAAOlB,OAAA,CAACH,QAAQ;QAACU,EAAE,EAAC,GAAG;QAACC,OAAO;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACtC;;IAEA;IACA,IAAIT,IAAI,IAAIU,OAAO,CAACV,IAAI,KAAKA,IAAI,EAAE,oBAAOH,OAAA,CAACH,QAAQ;MAACU,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;IAErE,OAAOV,QAAQ;EACnB,CAAC,CAAC,OAAOiB,GAAG,EAAE;IACV;IACAd,YAAY,CAACa,KAAK,CAAC,CAAC;IACpB,oBAAOlB,OAAA,CAACH,QAAQ;MAACU,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACtC;AACJ,CAAC;AAACQ,EAAA,GAvBInB,cAAc;AAyBpB,eAAeA,cAAc;AAAC,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}